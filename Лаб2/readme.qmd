---
title: "Практическая работа 002"
author: "gribanovaaalya@yandex.ru"
format: 
  md:
    output-file: README.md
---

## Название

Основы обработки данных с помощью R и Dplyr

## Цель работы

1. Развить практические навыки использования языка программирования R для обработки данных
2. Закрепить знания базовых типов данных языка R
3. Развить практические навыки использования функций обработки данных пакета dplyr – функции select(), filter(), mutate(), arrange(), group_by()

## Исходные данные

1. Ноутбук с ОС Windows 10
2. Rstudio Desktop
3. Интерпретатор R 4.5.1

## Задание

Проанализировать встроенный в пакет dplyr набор данных starwars с помощью языка R и ответить на вопросы:
1. Сколько строк в датафрейме?
2. Сколько столбцов в датафрейме?
3. Как просмотреть примерный вид датафрейма?
4. Сколько уникальных рас персонажей (species) представлено в данных?
5. Найти самого высокого персонажа
6. Найти всех персонажей ниже 170
7. Подсчитать ИМТ (индекс массы тела) для всех персонажей.
8. Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей.
9. Найти средний возраст персонажей каждой расы вселенной Звездных войн.
10. Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.
11. Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.

## Описание шагов

### Шаг 1

Подключим библиотеку dplyr:

```{r}
library(dplyr)
```
### Шаг 2

Ответим на вопросы:

#### 1. Сколько строк в датафрейме?

```{r}
starwars %>% nrow()
```

#### 2. Сколько столбцов в датафрейме?

```{r}
starwars %>% ncol()
```

#### 3. Как просмотреть примерный вид датафрейма?

```{r}
starwars %>% glimpse()
```

#### 4. Сколько уникальных рас персонажей (species) представлено в данных?

```{r}
starwars %>% select(species) %>% filter(!is.na(species)) %>% unique() %>% count() %>% as.data.frame() 
```
#### 5. Найти самого высокого персонажа.

```{r}
starwars %>% arrange(desc(height)) %>% select(name, height) %>% head(1) %>% as.data.frame()
```

#### 6. Найти всех персонажей ниже 170.

```{r}
starwars %>% filter(height < 170) %>% select(name, height) %>% as.data.frame()
```

#### 7. Подсчитать ИМТ (индекс массы тела) для всех персонажей.

```{r}
starwars %>% mutate(imt = mass / (height^2)) %>% select(name, imt) %>% as.data.frame()
```

#### 8. Найти 10 самых “вытянутых” персонажей. “Вытянутость” оценить по отношению массы (mass) к росту (height) персонажей.

```{r}
starwars %>% mutate(v = mass / height) %>% arrange(v) %>% head(10) %>% select(name, v) %>% as.data.frame()
```

#### 9. Найти средний возраст персонажей каждой расы вселенной Звездных войн.

```{r}
starwars %>% filter(!is.na(species)) %>% filter(!is.na(birth_year)) %>% group_by(species) %>% summarise(mean_y = mean(100 - birth_year)) %>% select(species, mean_y) %>% as.data.frame()
```

#### 10. Найти самый распространенный цвет глаз персонажей вселенной Звездных войн.

```{r}
starwars %>% group_by(eye_color) %>% summarise(count = n()) %>% arrange(desc(count)) %>% select(eye_color) %>% head(1) %>% as.data.frame()
```

#### 11. Подсчитать среднюю длину имени в каждой расе вселенной Звездных войн.

```{r}
starwars %>% filter(!is.na(species)) %>% filter(!is.na(name)) %>% group_by(species) %>% summarise(mean_l = mean(nchar(name))) %>% select(species, mean_l) %>% as.data.frame()
```

## Вывод

В результате выполнения практической работы были освоены базовые операции обработки данных в R с использованием функций пакета dplyr.